<!DOCTYPE html>
<html lang="en">
<head>
<title>panopo.ly</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<link rel="Stylesheet" href="panopoly.css" type="text/css">
<style>


.ThreeD
{
	-webkit-transform-style: preserve-3d;
	-moz-transform-style: preserve-3d;
	transform-style: preserve-3d;

	/* only needed for objects where we change tranform... */
	/* add transition for smoothing in low FPS mode */
	-webkit-transition: -webkit-transform 0s linear;
	-moz-transition: -moz-transform 0s linear;
	transition: transform 0s linear;
}

#CubeMap
{
	position: relative;
	margin: 100px auto;	/* might want to work this out from screen height? */
}


.face {
	position: absolute;
	padding: 0px;
	margin: 0px;
	font-size: 20px;
	line-height: 1em;
	color: #fff;
}

</style>
</head>

<body>
<div id="info">
	panopo.ly
</div>

<div id="UpTest">0</div>

<script src="js/soy.js"></script>
<script src="threejs/three.min.js"></script>
<script src="threejs/effects/StereoEffect.js"></script>
<script src="js/GoogleAnalytics.js"></script>
<script src="js/ClearDefaultText.js"></script>
<script src="js/SoyWebSocket-1.0.js"></script>
<script src="js/panopoly.js"></script>
<script src="js/CubeMap.js"></script>
<script src="js/support.js"></script>
<script src="js/SoySupport.js"></script>
<script src="js/SoyRiftWebsocket.js"></script>
<script src="js/SoySplit.js"></script>
<script src="js/SoyShrink.js"></script>
<script src="js/SoyFullscreen.js"></script>
<script src="js/SoyRiftAjax.js"></script>
<script src="js/SoyGyro.js"></script>
<script src="js/SoyCss3d.js"></script>
<script src="js/SoyFileSelect.js"></script>
<script src="js/SoyMouse.js"></script>




<div id="Container">
</div>

<script>
	

function Update()
{
	//	update camera
	var Quaternion = GetCameraQuaternion();
	SetCameraQuaternion( Quaternion );
	
	var $UpdateRateMs = 1000/40;
	setTimeout( Update, $UpdateRateMs );
}


//	support callbacks
AddOnSupportedChangedListener('RiftWebsocket',	function($Supported){	CheckAutoSwitch('RiftWebsocket',$Supported);	} );
AddOnSupportedChangedListener('RiftAjax',		function($Supported){	CheckAutoSwitch('RiftAjax',$Supported);	} );
AddOnSupportedChangedListener('Gyro',			function($Supported){	CheckAutoSwitch('Gyro',$Supported);	} );
AddOnSupportedChangedListener('Mouse',			function($Supported){	CheckAutoSwitch('Mouse',$Supported);	} );




//	init support
InitSupport();

//	save initial mode
PushMode();


InitCubemap( GetElement('Container'), 1000 );
SetCubemapBackground();
Update();



</script>



</body>
</html>
